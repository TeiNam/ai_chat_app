### 환경 변수 설정
@baseUrl = http://localhost:8000
@email = media@rastalion.me
@password = TestPassword1!

### 로그인하여 토큰 가져오기
# @name login
POST {{baseUrl}}/api/auth/login
Content-Type: application/x-www-form-urlencoded

username={{email}}&password={{password}}

### 토큰 변수 저장
@authToken = {{login.response.body.$.access_token}}

### API 키 생성
# @name createApiKey
POST {{baseUrl}}/api/api-keys
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "vendor": "openai",
  "api_key": "sk-your-openai-api-key",
  "is_active": true
}

### 생성된 API 키 ID 저장
@apiKeyId = {{createApiKey.response.body.$.api_key_id}}

### 사용자의 API 키 목록 조회
GET {{baseUrl}}/api/api-keys
Authorization: Bearer {{authToken}}

### API 키 상세 정보 조회 (복호화 포함)
GET {{baseUrl}}/api/api-keys/{{apiKeyId}}
Authorization: Bearer {{authToken}}

### API 키 업데이트
PUT {{baseUrl}}/api/api-keys/{{apiKeyId}}
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "vendor": "openai",
  "is_active": false
}

### API 키 업데이트 (키 값 변경)
PUT {{baseUrl}}/api/api-keys/{{apiKeyId}}
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "api_key": "sk-new-openai-api-key"
}

### API 키 유효성 검증
POST {{baseUrl}}/api/api-keys/verify
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "vendor": "openai",
  "api_key": "sk-test-api-key-to-verify"
}

### API 키 삭제
DELETE {{baseUrl}}/api/api-keys/{{apiKeyId}}
Authorization: Bearer {{authToken}}